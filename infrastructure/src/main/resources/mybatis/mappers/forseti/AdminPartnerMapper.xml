<?xml version="1.0" encoding="UTF-8" ?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" "http://mybatis.org/dtd/mybatis-3-mapper.dtd">
<mapper namespace="cn.tongdun.kunpeng.api.infrastructure.persistence.mybatis.mappers.forseti.AdminPartnerDOMapper">
	<resultMap id="AdminPartnerMap" type="AdminPartnerDO">
		<result property="id" column="id" />  
		<result property="uuid" column="uuid" />
		<result property="partnerCode" column="partner_code" />
        <result property="partnerKey" column="partner_key" />
		<result property="displayName" column="display_name" />
		<result property="admin" column="admin" />
		<result property="domain" column="domain" />
		<result property="status" column="status" />
        <result property="creditcloudStatus" column="creditcloud_status" />
		<result property="version" column="version" />
		<result property="gmtCreate" column="gmt_create" />
		<result property="gmtModified" column="gmt_modified" />
		<result property="createdBy" column="created_by" />
		<result property="updatedBy" column="updated_by" />		
		<result property="description" column="description" />
		<result property="testAccount" column="is_test_account"/>		
		<result property="endTime" column="end_time" />
		<result property="holder" column="holder"/>
		<result property="partnerType" column="partner_type"/>
		<result property="industryType" column="industry_type"/>
		<result property="channelCode" column="channel_code"/>
		<result property="secondIndustryType" column="second_industry_type"/>
		<result property="labels" column="labels"/>
	</resultMap>

	<sql id="queryColumns">
		id,partner_code,partner_key,uuid,display_name,admin,version,domain,status,creditcloud_status,description,
		gmt_create,gmt_modified,created_by,updated_by,is_test_account,end_time,holder,partner_type,industry_type,
		second_industry_type,labels
	</sql>


	<select id="queryByParams" resultMap="AdminPartnerMap" parameterType="Map">
		select
		<include refid="queryColumns" />
		from admin_partner
		where status = 1
			<if test="partnerCode != null">
				AND partner_code = #{partnerCode}
			</if>
			<if test="partnerList !=null">
			   AND partner_code in
			   <foreach collection="partnerList" item="partner" index="index"  open="(" separator="," close=")">
				  #{partner}
			   </foreach>
			</if>
		order by gmt_create desc
	</select>
	

	<select id="queryAllEnabledPartnerCodes" resultType="string">
		select partner_code from admin_partner where status = 1
	</select>
</mapper>