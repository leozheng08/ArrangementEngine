<?xml version="1.0" encoding="UTF-8"?>
<beans xmlns="http://www.springframework.org/schema/beans"
       xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
       xmlns:dubbo="http://code.alibabatech.com/schema/dubbo"
       xsi:schemaLocation="http://www.springframework.org/schema/beans
                        http://www.springframework.org/schema/beans/spring-beans-3.2.xsd
						http://code.alibabatech.com/schema/dubbo http://code.alibabatech.com/schema/dubbo/dubbo.xsd"
       default-autowire="byName">


    <dubbo:application name="kunpeng-api" />

    <!-- 使用zookeeper注册中心暴露服务地址 -->
    <dubbo:registry group="${dubbo.zookeeper.root}" protocol="zookeeper" address="${dubbo.zookeeper.host}" port="${dubbo.port}" />

    <dubbo:service interface="cn.tongdun.kunpeng.client.api.IRiskService" ref="riskService" group="${CLUSTER}"/>

    <dubbo:consumer check="${dubbo.check}" timeout="${dubbo.consumer.default.timeout}" retries="0"
                    filter="seqid" loadbalance="smart">
        <dubbo:parameter key="threadname" value="Dubbo-share-"/>
        <dubbo:parameter key="threadpool" value="cached"/>
        <dubbo:parameter key="corethreads" value="5" />
        <dubbo:parameter key="threads" value="20" />
        <dubbo:parameter key="alive" value="600000" />
    </dubbo:consumer>
    <!--用于dubbo泛化调用-->
    <bean id="referenceConfig" class="com.alibaba.dubbo.config.ReferenceConfig" autowire="byType">
        <property name="application">
            <bean class="com.alibaba.dubbo.config.ApplicationConfig" autowire="byType">
                <property name="name" value="forseti-api-generic"/>
                <property name="registry">
                    <bean class="com.alibaba.dubbo.config.RegistryConfig" autowire="byType">
                        <property name="address" value="${dubbo.zookeeper.generic}"/>
                        <property name="protocol" value="zookeeper"/>
                        <property name="group" value="${dubbo.zookeeper.root}"/>
                    </bean>
                </property>
            </bean>
        </property>
        <property name="generic" value="true"/>
    </bean>

    <dubbo:reference id="holmesService" interface="cn.fraudmetrix.holmes.service.intf.ICalculateService"
                     version="${holmes.dubbo.version}" retries="0" timeout="${holmes.dubbo.timeout}" connections="2" >
        <dubbo:parameter key="threadname" value="Dubbo-holmes-"/>
        <dubbo:parameter key="threadpool" value="cached"/>
        <dubbo:parameter key="corethreads" value="2" />
        <dubbo:parameter key="threads" value="5" />
        <dubbo:parameter key="alive" value="600000" />
    </dubbo:reference>


    <dubbo:reference id="gaeaPaasApi" interface="cn.tongdun.gaea.paas.api.GaeaPaasApi"
                     version="${gaea.paas.dubbo.version}" retries="0" timeout="${gaea.paas.dubbo.timeout}" connections="2" >
        <dubbo:parameter key="threadname" value="Dubbo-gaea-"/>
        <dubbo:parameter key="threadpool" value="cached"/>
        <dubbo:parameter key="corethreads" value="2" />
        <dubbo:parameter key="threads" value="10" />
        <dubbo:parameter key="alive" value="600000" />
    </dubbo:reference>

</beans>
